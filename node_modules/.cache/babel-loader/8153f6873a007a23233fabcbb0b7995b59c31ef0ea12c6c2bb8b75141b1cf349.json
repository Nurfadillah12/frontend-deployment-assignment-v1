{"ast":null,"code":"import _slicedToArray from\"C:/Grader/assignments/frontend-deployment-assignment-v1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{useState}from\"react\";import Card from\"../components/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Photos=function Photos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),photos=_useState2[0],setPhotos=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),sort=_useState4[0],setSort=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),submited=_useState6[0],setSubmited=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var deletePhoto=function deletePhoto(id){fetch(\"https://gallery-app-server.vercel.app/photos/\".concat(id),{method:\"DELETE\"}).then(function(res){return res.json();}).then(function(){var newPhotos=photos.filter(function(photo){return photo.id!==id;});setPhotos(newPhotos);}).catch(function(err){setError(err.message);});};useEffect(function(){setLoading(true);var url=\"https://gallery-app-server.vercel.app/photos\";if(sort||submited){url+=\"?_sort=id\";if(sort){url+=\"&_order=\".concat(sort);}if(submited){url+=\"&q=\".concat(submited);}}fetch(url).then(function(res){return res.json();}).then(function(json){setPhotos(json);setLoading(false);});// fetch(`https://gallery-app-server.vercel.app/photos`)\n//   .then((res) => {\n//     return res.json();\n//   })\n//   .then((json) => {\n//     setPhotos(json);\n//     setLoading(false);\n//   });\n},[submited,sort]);if(error)return/*#__PURE__*/_jsx(\"h1\",{style:{width:\"100%\",textAlign:\"center\",marginTop:\"20px\"},children:\"Error!\"});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"options\",children:[/*#__PURE__*/_jsxs(\"select\",{onChange:function onChange(e){return setSort(e.target.value);},\"data-testid\":\"sort\",className:\"form-select\",style:{},children:[/*#__PURE__*/_jsx(\"option\",{value:\"asc\",children:\"Ascending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"desc\",children:\"Descending\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();setSubmited(search);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"search\",onChange:function onChange(e){return setSearch(e.target.value);},className:\"form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Search\",\"data-testid\":\"submit\",className:\"form-btn\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:loading?/*#__PURE__*/_jsx(\"h1\",{style:{width:\"100%\",textAlign:\"center\",marginTop:\"20px\"},children:\"Loading...\"}):photos.map(function(photo){return/*#__PURE__*/_jsx(Card,{photo:photo,deletePhoto:deletePhoto},photo.id);})})]})});};export default Photos;","map":{"version":3,"names":["useEffect","useState","Card","Photos","photos","setPhotos","sort","setSort","submited","setSubmited","search","setSearch","loading","setLoading","error","setError","deletePhoto","id","fetch","method","then","res","json","newPhotos","filter","photo","catch","err","message","url","width","textAlign","marginTop","e","target","value","preventDefault","map"],"sources":["C:/Grader/assignments/frontend-deployment-assignment-v1/src/routes/Photos.jsx"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport Card from \"../components/Card\";\n\nconst Photos = () => {\n  const [photos, setPhotos] = useState([]);\n  const [sort, setSort] = useState(\"\");\n  const [submited, setSubmited] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const deletePhoto = (id) => {\n    fetch(`https://gallery-app-server.vercel.app/photos/${id}`, {\n      method: \"DELETE\",\n    })\n      .then((res) => {\n        return res.json();\n      })\n      .then(() => {\n        const newPhotos = photos.filter((photo) => photo.id !== id);\n        setPhotos(newPhotos);\n      })\n      .catch((err) => {\n        setError(err.message);\n      });\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    let url = \"https://gallery-app-server.vercel.app/photos\"\n    if(sort || submited) {\n      url += \"?_sort=id\";\n      if(sort) {\n        url += `&_order=${sort}`;\n      }\n      if(submited) {\n        url += `&q=${submited}`;\n      }\n    }\n    fetch(url).then((res) => {\n      return res.json();\n    }).then((json) => {\n      setPhotos(json);\n      setLoading(false);\n    })\n    // fetch(`https://gallery-app-server.vercel.app/photos`)\n    //   .then((res) => {\n    //     return res.json();\n    //   })\n    //   .then((json) => {\n    //     setPhotos(json);\n    //     setLoading(false);\n    //   });\n  }, [submited,sort]);\n\n  if (error) return <h1 style={{ width: \"100%\", textAlign: \"center\", marginTop: \"20px\" }}>Error!</h1>;\n\n  return (\n    <>\n      <div className=\"container\">\n        <div className=\"options\">\n          <select onChange={(e) => setSort(e.target.value)} data-testid=\"sort\" className=\"form-select\" style={{}}>\n            <option value=\"asc\">Ascending</option>\n            <option value=\"desc\">Descending</option>\n          </select>\n          <form\n            onSubmit={(e) => {\n              e.preventDefault();\n              setSubmited(search);\n            }}\n          >\n            <input type=\"text\" data-testid=\"search\" onChange={(e) => setSearch(e.target.value)} className=\"form-input\" />\n            <input type=\"submit\" value=\"Search\" data-testid=\"submit\" className=\"form-btn\" />\n          </form>\n        </div>\n        <div className=\"content\">\n          {loading ? (\n            <h1 style={{ width: \"100%\", textAlign: \"center\", marginTop: \"20px\" }}>Loading...</h1>\n          ) : (\n            photos.map((photo) => {\n              return <Card key={photo.id} photo={photo} deletePhoto={deletePhoto} />;\n            })\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Photos;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}